function _0x1d21(_0x2aff8f,_0x54ed45){const _0xc8d5ca=_0xc8d5();return _0x1d21=function(_0x1d2189,_0x48ab76){_0x1d2189=_0x1d2189-0xeb;let _0x169ce0=_0xc8d5ca[_0x1d2189];return _0x169ce0;},_0x1d21(_0x2aff8f,_0x54ed45);}const _0x84b278=_0x1d21;(function(_0x31013c,_0xf4b6ad){const _0x2a46c9=_0x1d21,_0x4148a0=_0x31013c();while(!![]){try{const _0x3a998f=parseInt(_0x2a46c9(0x149))/0x1*(parseInt(_0x2a46c9(0x138))/0x2)+parseInt(_0x2a46c9(0xf2))/0x3*(parseInt(_0x2a46c9(0xf1))/0x4)+parseInt(_0x2a46c9(0xf5))/0x5+-parseInt(_0x2a46c9(0x141))/0x6*(parseInt(_0x2a46c9(0x11c))/0x7)+-parseInt(_0x2a46c9(0x11d))/0x8+-parseInt(_0x2a46c9(0x121))/0x9+-parseInt(_0x2a46c9(0x10d))/0xa;if(_0x3a998f===_0xf4b6ad)break;else _0x4148a0['push'](_0x4148a0['shift']());}catch(_0x2fb03f){_0x4148a0['push'](_0x4148a0['shift']());}}}(_0xc8d5,0x5bef9));import{exp_se3_to_SE3,exp_so3_and_v_to_SO3_and_t,exp_so3_to_SO3,ln_SO3_and_t_to_so3_and_v,so3_mat_to_vec3,vec3_to_so3_mat,vec6_to_se3_mat}from'./utils_exp_and_log_obfuscated.js';import{add_matrix_matrix,dot_product,frobenius_norm_matrix,identity_matrix,mul_matrix_matrix,mul_matrix_scalar,normalized_matrix,pt_dis_to_line,sub_matrix_matrix,unroll_matrix_to_list}from'./utils_math.js';import{get_default_lil_gui,refresh_displays}from'./utils_three.js';import{displacement_pose_SO3_and_position,interpolate_poses_SO3_and_position,map_pose_SO3_and_position}from'./utils_exp_and_log.js';import{optimization_bfgs,optimization_gradient_descent,optimization_powell,optimization_solve}from'./utils_optimization.js';import{TransformGizmoEngine}from'./utils_transform_gizmo.js';export function forward_kinematics_SE3(_0x11628d,_0x38c5bc){const _0x4a9682=_0x1d21;let _0x216259=_0x11628d[_0x4a9682(0xfd)](),_0x1e8bd6=[];for(let _0x53b812=0x0;_0x53b812<_0x216259;_0x53b812++){_0x1e8bd6['push'](exp_se3_to_SE3(vec6_to_se3_mat([0x0,0x0,0x0,0x0,0x0,0x0])));}let _0x56e47e=_0x11628d[_0x4a9682(0x106)];for(let _0x2a3b53=0x1;_0x2a3b53<_0x56e47e[_0x4a9682(0x111)];_0x2a3b53++){let _0x43fbb9=_0x56e47e[_0x2a3b53];_0x43fbb9[_0x4a9682(0x140)](_0x9f77c8=>{const _0x4b798c=_0x4a9682;let _0x4a62d1=_0x11628d[_0x4b798c(0x14c)][_0x9f77c8],_0x5a5da8=_0x4a62d1[_0x4b798c(0x12f)],_0xc0d8d7=_0x4a62d1['parent_link_idx'],_0x26701c=_0x11628d['joints'][_0x5a5da8],_0x93e29d=_0x26701c[_0x4b798c(0x14f)],_0x28702f=_0x1e8bd6[_0xc0d8d7],_0x364b70=_0x26701c[_0x4b798c(0xf4)],_0x361c4a=mul_matrix_matrix(_0x28702f,_0x364b70);if(_0x93e29d===_0x4b798c(0x109)){let _0x2544a4=_0x38c5bc[_0x26701c[_0x4b798c(0xf3)]],_0x3223e4=[[0x1,0x0,0x0,_0x2544a4*_0x26701c[_0x4b798c(0xef)][0x0][0x0]],[0x0,0x1,0x0,_0x2544a4*_0x26701c['axis'][0x1][0x0]],[0x0,0x0,0x1,_0x2544a4*_0x26701c['axis'][0x2][0x0]],[0x0,0x0,0x0,0x1]];_0x361c4a=mul_matrix_matrix(_0x361c4a,_0x3223e4);}else{if(_0x93e29d===_0x4b798c(0xf7)){let _0x54a6d3=_0x38c5bc[_0x26701c[_0x4b798c(0xf3)]],_0x4bfebe=_0x26701c['axis'],_0x27c704=normalized_matrix(_0x4bfebe),_0x4825a6=mul_matrix_scalar(_0x27c704,_0x54a6d3);_0x4825a6=unroll_matrix_to_list(_0x4825a6);let _0x569b84=vec6_to_se3_mat([_0x4825a6[0x0],_0x4825a6[0x1],_0x4825a6[0x2],0x0,0x0,0x0]),_0x55d42a=exp_se3_to_SE3(_0x569b84);_0x361c4a=mul_matrix_matrix(_0x361c4a,_0x55d42a);}else{if(_0x93e29d===_0x4b798c(0x10c)){let _0x5679ac=_0x26701c[_0x4b798c(0x15c)],_0xfc9ed=_0x26701c[_0x4b798c(0xf9)],_0x1c9873=[_0x38c5bc[_0x5679ac[0x0]],_0x38c5bc[_0x5679ac[0x1]],_0x38c5bc[_0x5679ac[0x2]]],_0x2953f0=[_0x38c5bc[_0xfc9ed[0x0]],_0x38c5bc[_0xfc9ed[0x1]],_0x38c5bc[_0xfc9ed[0x2]]],_0x52df2b=vec3_to_so3_mat(_0x1c9873),_0x14f783=exp_so3_to_SO3(_0x52df2b),_0x3391a0=[[_0x14f783[0x0][0x0],_0x14f783[0x0][0x1],_0x14f783[0x0][0x2],_0x2953f0[0x0]],[_0x14f783[0x1][0x0],_0x14f783[0x1][0x1],_0x14f783[0x1][0x2],_0x2953f0[0x1]],[_0x14f783[0x2][0x0],_0x14f783[0x2][0x1],_0x14f783[0x2][0x2],_0x2953f0[0x2]],[0x0,0x0,0x0,0x1]];_0x361c4a=mul_matrix_matrix(_0x361c4a,_0x3391a0);}}}_0x1e8bd6[_0x9f77c8]=_0x361c4a;});}return _0x1e8bd6;}export function forward_kinematics_SO3_and_position(_0x2c95e4,_0x20d03d){const _0x2bdfb7=_0x1d21;let _0x669046=_0x2c95e4['num_links'](),_0x7ad7ba=[];for(let _0xf141eb=0x0;_0xf141eb<_0x669046;_0xf141eb++){_0x7ad7ba[_0x2bdfb7(0x104)](exp_so3_and_v_to_SO3_and_t(vec3_to_so3_mat([0x0,0x0,0x0]),[0x0,0x0,0x0]));}let _0xbc638c=_0x2c95e4['kinematic_hierarchy'];for(let _0x5a9100=0x1;_0x5a9100<_0xbc638c[_0x2bdfb7(0x111)];_0x5a9100++){let _0x18ad72=_0xbc638c[_0x5a9100];_0x18ad72[_0x2bdfb7(0x140)](_0x3eb319=>{const _0x34500c=_0x2bdfb7;let _0x3a5aac=_0x2c95e4[_0x34500c(0x14c)][_0x3eb319],_0x278116=_0x3a5aac['parent_joint_idx'],_0x3e1f26=_0x3a5aac['parent_link_idx'],_0x3ce256=_0x2c95e4['joints'][_0x278116],_0x54a1f3=_0x3ce256[_0x34500c(0x14f)],_0x593125=_0x7ad7ba[_0x3e1f26],_0x61dac5=[_0x3ce256[_0x34500c(0x159)],_0x3ce256[_0x34500c(0x161)]],_0x4df3e2=[mul_matrix_matrix(_0x593125[0x0],_0x61dac5[0x0]),add_matrix_matrix(mul_matrix_matrix(_0x593125[0x0],_0x61dac5[0x1]),_0x593125[0x1])];if(_0x54a1f3===_0x34500c(0x109)){let _0x24935b=_0x20d03d[_0x3ce256[_0x34500c(0xf3)]],_0x5540a8=[identity_matrix(0x3),[[_0x24935b*_0x3ce256[_0x34500c(0xef)][0x0][0x0]],[_0x24935b*_0x3ce256[_0x34500c(0xef)][0x1][0x0]],[_0x24935b*_0x3ce256[_0x34500c(0xef)][0x2][0x0]]]];_0x4df3e2=[mul_matrix_matrix(_0x4df3e2[0x0],_0x5540a8[0x0]),add_matrix_matrix(mul_matrix_matrix(_0x4df3e2[0x0],_0x5540a8[0x1]),_0x4df3e2[0x1])];}else{if(_0x54a1f3===_0x34500c(0xf7)){let _0x4d9045=_0x20d03d[_0x3ce256[_0x34500c(0xf3)]],_0x346fdc=_0x3ce256[_0x34500c(0xef)],_0x10976c=normalized_matrix(_0x346fdc),_0x53e0fd=mul_matrix_scalar(_0x10976c,_0x4d9045);_0x53e0fd=unroll_matrix_to_list(_0x53e0fd);let _0x406afd=vec3_to_so3_mat(_0x53e0fd),_0x252699=exp_so3_to_SO3(_0x406afd),_0x4c918d=[_0x252699,[[0x0],[0x0],[0x0]]];_0x4df3e2=[mul_matrix_matrix(_0x4df3e2[0x0],_0x4c918d[0x0]),add_matrix_matrix(mul_matrix_matrix(_0x4df3e2[0x0],_0x4c918d[0x1]),_0x4df3e2[0x1])];}else{if(_0x54a1f3===_0x34500c(0x10c)){let _0x3748d8=_0x3ce256[_0x34500c(0x15c)],_0x3a2689=_0x3ce256[_0x34500c(0xf9)],_0x4d18ea=[_0x20d03d[_0x3748d8[0x0]],_0x20d03d[_0x3748d8[0x1]],_0x20d03d[_0x3748d8[0x2]]],_0x235275=[_0x20d03d[_0x3a2689[0x0]],_0x20d03d[_0x3a2689[0x1]],_0x20d03d[_0x3a2689[0x2]]],_0x23b39f=vec3_to_so3_mat(_0x4d18ea),_0x12722e=exp_so3_to_SO3(_0x23b39f),_0x7b2574=[_0x12722e,[[_0x235275[0x0]],[_0x235275[0x1]],[_0x235275[0x2]]]];_0x4df3e2=[mul_matrix_matrix(_0x4df3e2[0x0],_0x7b2574[0x0]),add_matrix_matrix(mul_matrix_matrix(_0x4df3e2[0x0],_0x7b2574[0x1]),_0x4df3e2[0x1])];}}}_0x7ad7ba[_0x3eb319]=_0x4df3e2;});}return _0x7ad7ba;}export function forward_kinematics_SO3_and_position_all(_0x44b0b5,_0xeac3f8){const _0x4973f7=_0x1d21;let _0x3309e9=_0x44b0b5[_0x4973f7(0xfd)](),_0x13a52d=[],_0x64aec6=[],_0x2f72b5=[];for(let _0x13b0bb=0x0;_0x13b0bb<_0x3309e9;_0x13b0bb++){_0x13a52d[_0x4973f7(0x104)](exp_so3_and_v_to_SO3_and_t(vec3_to_so3_mat([0x0,0x0,0x0]),[0x0,0x0,0x0])),_0x64aec6[_0x4973f7(0x104)](exp_so3_and_v_to_SO3_and_t(vec3_to_so3_mat([0x0,0x0,0x0]),[0x0,0x0,0x0])),_0x2f72b5[_0x4973f7(0x104)](exp_so3_and_v_to_SO3_and_t(vec3_to_so3_mat([0x0,0x0,0x0]),[0x0,0x0,0x0]));}let _0x194f2c=_0x44b0b5[_0x4973f7(0x106)];for(let _0x5c514e=0x1;_0x5c514e<_0x194f2c[_0x4973f7(0x111)];_0x5c514e++){let _0xe01eab=_0x194f2c[_0x5c514e];_0xe01eab[_0x4973f7(0x140)](_0x22b897=>{const _0x3e0f01=_0x4973f7;let _0x3fc531=_0x44b0b5[_0x3e0f01(0x14c)][_0x22b897],_0x3899cf=_0x3fc531[_0x3e0f01(0x12f)],_0x4562a3=_0x3fc531[_0x3e0f01(0x131)],_0xd92e52=_0x44b0b5[_0x3e0f01(0x100)][_0x3899cf],_0x425274=_0xd92e52['joint_type_string'],_0x26147e=_0x2f72b5[_0x4562a3];_0x13a52d[_0x22b897]=_0x26147e[_0x3e0f01(0x147)]();let _0x3958ef=[_0xd92e52[_0x3e0f01(0x159)],_0xd92e52['xyz_vec']],_0xa4b42d=[mul_matrix_matrix(_0x26147e[0x0],_0x3958ef[0x0]),add_matrix_matrix(mul_matrix_matrix(_0x26147e[0x0],_0x3958ef[0x1]),_0x26147e[0x1])];_0x64aec6[_0x22b897]=_0xa4b42d['slice']();if(_0x425274===_0x3e0f01(0x109)){let _0x361ce2=_0xeac3f8[_0xd92e52[_0x3e0f01(0xf3)]],_0xed8940=[identity_matrix(0x3),[[_0x361ce2*_0xd92e52[_0x3e0f01(0xef)][0x0][0x0]],[_0x361ce2*_0xd92e52[_0x3e0f01(0xef)][0x1][0x0]],[_0x361ce2*_0xd92e52['axis'][0x2][0x0]]]];_0xa4b42d=map_pose_SO3_and_position(_0xa4b42d,_0xed8940);}else{if(_0x425274===_0x3e0f01(0xf7)){let _0x173d9c=_0xeac3f8[_0xd92e52[_0x3e0f01(0xf3)]],_0x3d7881=_0xd92e52['axis'],_0x253c03=normalized_matrix(_0x3d7881),_0x39a454=mul_matrix_scalar(_0x253c03,_0x173d9c);_0x39a454=unroll_matrix_to_list(_0x39a454);let _0x25bab9=vec3_to_so3_mat(_0x39a454),_0x63c6f4=exp_so3_to_SO3(_0x25bab9),_0x3b57d1=[_0x63c6f4,[[0x0],[0x0],[0x0]]];_0xa4b42d=[mul_matrix_matrix(_0xa4b42d[0x0],_0x3b57d1[0x0]),add_matrix_matrix(mul_matrix_matrix(_0xa4b42d[0x0],_0x3b57d1[0x1]),_0xa4b42d[0x1])];}else{if(_0x425274===_0x3e0f01(0x10c)){let _0x4cb1b4=_0xd92e52[_0x3e0f01(0x15c)],_0xc5ae5e=_0xd92e52[_0x3e0f01(0xf9)],_0x4006b8=[_0xeac3f8[_0x4cb1b4[0x0]],_0xeac3f8[_0x4cb1b4[0x1]],_0xeac3f8[_0x4cb1b4[0x2]]],_0x1c0dcd=[_0xeac3f8[_0xc5ae5e[0x0]],_0xeac3f8[_0xc5ae5e[0x1]],_0xeac3f8[_0xc5ae5e[0x2]]],_0x501945=vec3_to_so3_mat(_0x4006b8),_0x2b089b=exp_so3_to_SO3(_0x501945),_0x320606=[_0x2b089b,[[_0x1c0dcd[0x0]],[_0x1c0dcd[0x1]],[_0x1c0dcd[0x2]]]];_0xa4b42d=[mul_matrix_matrix(_0xa4b42d[0x0],_0x320606[0x0]),add_matrix_matrix(mul_matrix_matrix(_0xa4b42d[0x0],_0x320606[0x1]),_0xa4b42d[0x1])];}}}_0x2f72b5[_0x22b897]=_0xa4b42d[_0x3e0f01(0x147)]();});}return[_0x13a52d,_0x64aec6,_0x2f72b5];}export function set_robot_state(_0x5a3228,_0x45e7e7,_0x3ab0e9){let _0x41eb69=forward_kinematics_SE3(_0x45e7e7,_0x3ab0e9);set_robot_state_from_SE3_fk_result(_0x5a3228,_0x45e7e7,_0x41eb69);}export function set_robot_state_from_SE3_fk_result(_0x3dc15f,_0x204d3d,_0x20968a){for(let _0x4fbd56=0x0;_0x4fbd56<_0x20968a['length'];_0x4fbd56++){_0x204d3d['set_link_mesh_pose_from_SE3_matrix'](_0x3dc15f,_0x4fbd56,_0x20968a[_0x4fbd56]);}}export function set_robot_state_from_SO3_and_position_fk_result(_0x429789,_0x193698,_0x3aa76e){const _0x28e034=_0x1d21;for(let _0x20181d=0x0;_0x20181d<_0x3aa76e[_0x28e034(0x111)];_0x20181d++){_0x193698[_0x28e034(0x151)](_0x429789,_0x20181d,_0x3aa76e[_0x20181d][0x0],_0x3aa76e[_0x20181d][0x1]);}}export function inverse_kinematics_SO3_and_position(_0x1f13ec,_0x59f468,_0x5a7bd2,_0xfd9d9f=0x64){let _0x4b698f=_0x35ed5c=>{const _0x5b85f3=_0x1d21;let _0x3b607c=forward_kinematics_SO3_and_position(_0x1f13ec,_0x35ed5c),_0x2130a9=0x0;return _0x5a7bd2[_0x5b85f3(0x140)](_0x4e5de=>{const _0x599d6a=_0x5b85f3;let _0x294aa3=_0x4e5de[_0x599d6a(0x15e)],_0x41c14a=_0x3b607c[_0x4e5de[_0x599d6a(0x133)]],_0x342254=_0x4e5de[_0x599d6a(0x14b)];if(_0x294aa3==='combined'){let _0x3cf4c4=displacement_pose_SO3_and_position(_0x41c14a,_0x342254),_0x44ec27=ln_SO3_and_t_to_so3_and_v(_0x3cf4c4[0x0],_0x3cf4c4[0x1]),_0x1cfa06=unroll_matrix_to_list(so3_mat_to_vec3(_0x44ec27[0x0])),_0x179f2d=unroll_matrix_to_list(_0x44ec27[0x1]),_0x3a3494=[_0x1cfa06[0x0],_0x1cfa06[0x1],_0x1cfa06[0x2],_0x179f2d[0x0],_0x179f2d[0x1],_0x179f2d[0x2]],_0x308867=frobenius_norm_matrix(_0x3a3494);_0x2130a9+=Math[_0x599d6a(0x145)](_0x308867,0x2);}else{if(_0x294aa3===_0x599d6a(0xfc)){}else{if(_0x294aa3==='position'){let _0x2648be=_0x41c14a[0x1],_0x33db6c=_0x342254[0x1],_0x146da2=sub_matrix_matrix(_0x2648be,_0x33db6c),_0x5ff630=frobenius_norm_matrix(_0x146da2);_0x2130a9+=Math['pow'](_0x5ff630,0x2);}}}}),_0x2130a9;};return optimization_powell(_0x4b698f,_0x59f468,_0xfd9d9f);}export function robot_kinematic_opt(_0x44746a,_0x3c4ec0,_0x3cff10,_0x4cf2c8,_0x13f9a7=_0x84b278(0x13b)){let _0x814886=_0x5f2156=>{const _0x4acba5=_0x1d21;let _0x5e5a36=forward_kinematics_SO3_and_position(_0x44746a,_0x5f2156),_0x138cd2=0x0;return _0x3cff10[_0x4acba5(0x140)](_0x515fed=>{const _0xefdc36=_0x4acba5;let _0x1bb322=_0x515fed[_0xefdc36(0xeb)];if(_0x1bb322===_0xefdc36(0x13a)){let _0x54779e=_0x5e5a36[_0x515fed[_0xefdc36(0x133)]],_0x336f61=_0x515fed['goal_pose'],_0x541d5d=displacement_pose_SO3_and_position(_0x54779e,_0x336f61),_0x501bc3=ln_SO3_and_t_to_so3_and_v(_0x541d5d[0x0],_0x541d5d[0x1]),_0x466bcf=unroll_matrix_to_list(so3_mat_to_vec3(_0x501bc3[0x0])),_0x1b805b=unroll_matrix_to_list(_0x501bc3[0x1]),_0x5b1142=[_0x466bcf[0x0],_0x466bcf[0x1],_0x466bcf[0x2],_0x1b805b[0x0],_0x1b805b[0x1],_0x1b805b[0x2]],_0x1d5565=frobenius_norm_matrix(_0x5b1142);_0x138cd2+=_0x515fed[_0xefdc36(0xf6)]*Math[_0xefdc36(0x145)](_0x1d5565,0x2);}else{if(_0x1bb322==='pose_match_wrong'){let _0x4d0bde=_0x5e5a36[_0x515fed[_0xefdc36(0x133)]],_0x38b8fd=_0x515fed[_0xefdc36(0x14b)],_0x505e5f=sub_matrix_matrix(_0x4d0bde[0x0],_0x38b8fd[0x0]),_0x48a4d0=sub_matrix_matrix(_0x4d0bde[0x1],_0x38b8fd[0x1]),_0x4d4a28=frobenius_norm_matrix(_0x505e5f),_0x19e8cf=frobenius_norm_matrix(_0x48a4d0);_0x138cd2+=Math[_0xefdc36(0x145)](_0x4d4a28+_0x19e8cf,0x2);}else{if(_0x1bb322===_0xefdc36(0x13d)){let _0x27a971=_0x5e5a36[_0x515fed['link_idx']],_0x107ef9=_0x515fed['goal_position'],_0x396109=_0x27a971[0x1],_0x1164f4=sub_matrix_matrix(_0x396109,_0x107ef9),_0x3f8266=frobenius_norm_matrix(_0x1164f4);_0x138cd2+=_0x515fed[_0xefdc36(0xf6)]*Math[_0xefdc36(0x145)](_0x3f8266,0x2);}else{if(_0x1bb322===_0xefdc36(0x156)){let _0x26c253=_0x5e5a36[_0x515fed[_0xefdc36(0x133)]],_0x591427=_0x515fed[_0xefdc36(0x125)],_0x1ca820=mul_matrix_matrix(_0x26c253[0x0],_0x591427),_0x5c3fd2=_0x26c253[0x1],_0x50ee04=add_matrix_matrix(mul_matrix_scalar(_0x1ca820,0x14),_0x5c3fd2),_0x432782=_0x515fed['look_at_position'],_0x2cb9ac=pt_dis_to_line(_0x432782,_0x5c3fd2,_0x50ee04,!![]);_0x138cd2+=_0x515fed[_0xefdc36(0xf6)]*Math[_0xefdc36(0x145)](_0x2cb9ac,0x2);}else{if(_0x1bb322===_0xefdc36(0xfe)){let _0x44288b=_0x5e5a36[_0x515fed[_0xefdc36(0x133)]],_0x356dab=_0x515fed['side_axis'],_0x5a2f52=mul_matrix_matrix(_0x44288b[0x0],_0x356dab),_0x3a7802=[[0x0],[0x0],[0x1]],_0x375dde=dot_product(_0x5a2f52,_0x3a7802);_0x138cd2+=_0x515fed[_0xefdc36(0xf6)]*Math[_0xefdc36(0x145)](_0x375dde,0x2);}}}}}}),_0x138cd2;};return optimization_solve(_0x814886,_0x3c4ec0,_0x4cf2c8,_0x13f9a7);}export class OptGoalSpecPoseMatch{constructor(_0xc0ec59,_0x4a6b5b=0x1){const _0x4f1fcf=_0x84b278;this[_0x4f1fcf(0xeb)]='pose_match',this[_0x4f1fcf(0x133)]=_0xc0ec59,this[_0x4f1fcf(0xf6)]=_0x4a6b5b;}}export class OptGoalPoseMatch{constructor(_0x5721b9,_0x44226a,_0x2b8c03=0x1){const _0x507214=_0x84b278;this[_0x507214(0x14b)]=_0x5721b9,this[_0x507214(0xeb)]='pose_match',this[_0x507214(0x133)]=_0x44226a,this['weight']=_0x2b8c03;}}function _0xc8d5(){const _0x5a975a=['robot','mode','is_playing','DOFs','xyz_vec','transform_gizmo_engine','mode_string','solver','look_at_position','set_mesh_visibility','axis','interpolator_settings','608rlpmUV','12843pqJGYW','dof_idx','xyz_rpy_SE3_matrix','2628825kdKxMU','weight','revolute','interpolator','translation_dof_idxs','settings','goal_specs','separate','num_links','upright','Select\x20All\x20Frames','joints','set_link_mesh_visibility','link_name','first_loop','push','lower_bound','kinematic_hierarchy','continuous_solves','dof','prismatic','toggle_mode','actions','floating','2547210wdCota','speed','set_link_wireframe_visibility','display_mesh','length','addFolder','play','Display\x20Mesh\x20only\x20with\x20Frame','reset_all','reset','joint_num_dofs','get_time_elapsed','select_all','playback\x20speed','set_pose_of_gizmo_SO3_matrix_and_position','7yHmEst','2402712bRYRyQ','goal_position','curr_state','link','2419722csBMVz','solve_now','interpolator_actions','three_loop_function','forward_axis','min','set_wireframe_visibility','toFixed','name','side_axis','gui','frame','display_link_mesh_only_with_frame','deselect_all','parent_joint_idx','add_gizmo_SO3_matrix_and_position','parent_link_idx','init_state','link_idx','max','link\x20','pose_match_wrong','Interpolator','3464ciSUOR','Actions','pose_match','bfgs','disable','position_match','toggle_widget_mode','curr_solve','forEach','282012xlStDi','Display\x20Mesh','get_gizmo_pose_as_SO3_matrix_and_position','draw_debug_line','pow','Deselect\x20All\x20Frames','slice','Display\x20Wireframe','41SoSYzx','stop','goal_pose','links','num_dofs','display_wireframe','joint_type_string','Solve\x20now','set_link_mesh_pose_from_SO3_matrix_and_position','Reset','interpolator_max','link_to_kinematic_hierarchy_order_idx','add','look_at','Links','time_of_previous_solve','rpy_SO3_matrix','upper_bound','toString','rotation_dof_idxs'];_0xc8d5=function(){return _0x5a975a;};return _0xc8d5();}export class OptGoalSpecPoseMatchWrong{constructor(_0x4b503d,_0x5d388b=0x1){const _0x28d012=_0x84b278;this[_0x28d012(0xeb)]=_0x28d012(0x136),this['link_idx']=_0x4b503d,this[_0x28d012(0xf6)]=_0x5d388b;}}export class OptGoalPoseMatchWrong{constructor(_0x282aab,_0x537dd8,_0x3acbc0=0x1){const _0x5aa51c=_0x84b278;this[_0x5aa51c(0x14b)]=_0x282aab,this[_0x5aa51c(0xeb)]=_0x5aa51c(0x136),this[_0x5aa51c(0x133)]=_0x537dd8,this[_0x5aa51c(0xf6)]=_0x3acbc0;}}export class OptGoalSpecPositionMatch{constructor(_0x196c2e,_0x4e715d=0x1){const _0x85d3ac=_0x84b278;this['mode_string']=_0x85d3ac(0x13d),this[_0x85d3ac(0x133)]=_0x196c2e,this[_0x85d3ac(0xf6)]=_0x4e715d;}}export class OptGoalPositionMatch{constructor(_0x289a9c,_0x247a86,_0x2a3920=0x1){const _0x1878d1=_0x84b278;this[_0x1878d1(0x11e)]=_0x289a9c,this[_0x1878d1(0xeb)]='position_match',this[_0x1878d1(0x133)]=_0x247a86,this[_0x1878d1(0xf6)]=_0x2a3920;}}export class OptGoalSpecLookAt{constructor(_0xe01408,_0x48036c,_0x2dbe81=0x1){const _0x5b6a92=_0x84b278;this['mode_string']=_0x5b6a92(0x156),this['link_idx']=_0xe01408,this[_0x5b6a92(0x125)]=_0x48036c,this[_0x5b6a92(0xf6)]=_0x2dbe81;}}export class OptGoalLookAt{constructor(_0x5deb00,_0x17b66b,_0x14b0dd,_0x140078=0x1){const _0x50103f=_0x84b278;this[_0x50103f(0xed)]=_0x5deb00,this[_0x50103f(0xeb)]='look_at',this['link_idx']=_0x17b66b,this[_0x50103f(0x125)]=_0x14b0dd,this['weight']=_0x140078;}}export class OptGoalSpecUpright{constructor(_0x3dea36,_0x120f1b,_0xc2ea6f=0x1){const _0x41a549=_0x84b278;this[_0x41a549(0xeb)]=_0x41a549(0xfe),this[_0x41a549(0x133)]=_0x3dea36,this[_0x41a549(0x12a)]=_0x120f1b,this[_0x41a549(0xf6)]=_0xc2ea6f;}}export class OptGoalUpright{constructor(_0x35d3a3,_0x5995b7,_0x390c61=0x1){const _0x275a07=_0x84b278;this[_0x275a07(0xeb)]='upright',this[_0x275a07(0x133)]=_0x35d3a3,this[_0x275a07(0x12a)]=_0x5995b7,this[_0x275a07(0xf6)]=_0x390c61;}}export class IKGoal{constructor(_0x5c6e81,_0x537cae,_0x46ec7a){const _0xc25c77=_0x84b278;this[_0xc25c77(0x133)]=_0x5c6e81,this[_0xc25c77(0x14b)]=_0x537cae,this[_0xc25c77(0x15e)]=_0x46ec7a;}}export class RobotFKSlidersVisualizer{constructor(_0x1ae663,_0x1e4833=!![],_0x29e7ca=![],_0x28de51=![],_0x3c5577=![],_0x2e88f2=![],_0x498f8b=![],_0x36e39f=![],_0x2dd43c=![],_0x1fd0d7=![]){const _0x115882=_0x84b278;this[_0x115882(0x15d)]=_0x1ae663,this['interpolator']=_0x1fd0d7,this[_0x115882(0x10b)]={},this[_0x115882(0xfa)]={'display_wireframe':_0x29e7ca,'display_mesh':_0x1e4833,'display_link_mesh_only_with_frame':_0x28de51},this['interpolator_settings']={'t':0x0,'speed':0x1,'is_playing':![]},this[_0x115882(0x123)]={'play':()=>{const _0x3e8727=_0x115882;this[_0x3e8727(0xf0)]['is_playing']=!![];},'stop':()=>{const _0x2efa86=_0x115882;this[_0x2efa86(0xf0)][_0x2efa86(0x15f)]=![];}};let _0x165946=get_default_lil_gui(),_0x464a16=_0x165946['add'](this[_0x115882(0xfa)],'display_mesh')[_0x115882(0x129)](_0x115882(0x142));_0x2e88f2&&_0x464a16[_0x115882(0x13c)]();let _0x1f5c09=_0x165946[_0x115882(0x155)](this[_0x115882(0xfa)],'display_wireframe')[_0x115882(0x129)](_0x115882(0x148));_0x498f8b&&_0x1f5c09[_0x115882(0x13c)]();let _0x527ce9=_0x165946[_0x115882(0x155)](this[_0x115882(0xfa)],_0x115882(0x12d))[_0x115882(0x129)](_0x115882(0x114));_0x36e39f&&_0x527ce9[_0x115882(0x13c)]();let _0x562d14=[],_0x46b3ca=_0x165946[_0x115882(0x112)](_0x115882(0x160)),_0x55b2fe=0x0;for(let _0x37b2e8=0x0;_0x37b2e8<_0x1ae663['joints'][_0x115882(0x111)];_0x37b2e8++){let _0x2193f2=_0x1ae663[_0x115882(0x100)][_0x37b2e8];if(_0x2193f2[_0x115882(0x117)]>0x0){if(_0x2193f2[_0x115882(0x14f)]==='floating'){for(let _0x5cc91b=0x0;_0x5cc91b<0x3;_0x5cc91b++){this[_0x115882(0xfa)][_0x115882(0x108)+_0x55b2fe['toString']()]=0x0;let _0x348413=_0x46b3ca[_0x115882(0x155)](this['settings'],_0x115882(0x108)+_0x55b2fe['toString'](),-3.14,3.14);_0x2dd43c&&_0x348413[_0x115882(0x13c)](),this[_0x115882(0x10b)]['dof'+_0x55b2fe['toString']()+_0x115882(0x116)]=()=>{const _0x593fd5=_0x115882;this[_0x593fd5(0xfa)][_0x593fd5(0x108)+_0x55b2fe[_0x593fd5(0x15b)]()]=0x0,refresh_displays(_0x165946);},_0x562d14[_0x115882(0x104)](0x0),_0x55b2fe++;}for(let _0x4ae91a=0x0;_0x4ae91a<0x3;_0x4ae91a++){this[_0x115882(0xfa)][_0x115882(0x108)+_0x55b2fe[_0x115882(0x15b)]()]=0x0;let _0x29eded=_0x46b3ca[_0x115882(0x155)](this[_0x115882(0xfa)],'dof'+_0x55b2fe['toString'](),-0x1,0x1);_0x2dd43c&&_0x29eded[_0x115882(0x13c)](),this[_0x115882(0x10b)]['dof'+_0x55b2fe[_0x115882(0x15b)]()+'reset']=()=>{const _0x304f8b=_0x115882;this[_0x304f8b(0xfa)][_0x304f8b(0x108)+_0x55b2fe['toString']()]=0x0,refresh_displays(_0x165946);},_0x562d14['push'](0x0),_0x55b2fe++;}}else{let _0x353eeb=_0x2193f2[_0x115882(0x105)],_0x2c3adc=_0x2193f2[_0x115882(0x15a)];this[_0x115882(0xfa)][_0x115882(0x108)+_0x55b2fe['toString']()]=Math[_0x115882(0x134)](Math[_0x115882(0x126)](0x0,_0x2c3adc),_0x353eeb),_0x562d14[_0x115882(0x104)](Math['max'](Math[_0x115882(0x126)](0x0,_0x2c3adc),_0x353eeb));let _0x4902de=_0x46b3ca['add'](this[_0x115882(0xfa)],_0x115882(0x108)+_0x55b2fe['toString'](),_0x353eeb,_0x2c3adc);_0x2dd43c&&_0x4902de[_0x115882(0x13c)](),this['actions'][_0x115882(0x108)+_0x55b2fe[_0x115882(0x15b)]()+'reset']=()=>{const _0x2e3ea5=_0x115882;this[_0x2e3ea5(0xfa)][_0x2e3ea5(0x108)+_0x55b2fe[_0x2e3ea5(0x15b)]()]=0x0,refresh_displays(_0x165946);},_0x55b2fe+=0x1;}}}let _0x3d9cc7=_0x165946['addFolder'](_0x115882(0x139));this['actions'][_0x115882(0x115)]=()=>{const _0x2c6b7b=_0x115882;for(let _0x1ab6a6=0x0;_0x1ab6a6<_0x1ae663[_0x2c6b7b(0x14d)]();_0x1ab6a6++){this[_0x2c6b7b(0xfa)][_0x2c6b7b(0x108)+_0x1ab6a6['toString']()]=_0x562d14[_0x1ab6a6];}refresh_displays(_0x165946);},_0x3d9cc7[_0x115882(0x155)](this[_0x115882(0x10b)],'reset_all')[_0x115882(0x129)](_0x115882(0x152));if(_0x1fd0d7){let _0x519a42=_0x165946[_0x115882(0x112)](_0x115882(0x137));this[_0x115882(0x153)]=this['robot'][_0x115882(0x14c)][_0x115882(0x111)]*0x3+0x3,_0x519a42[_0x115882(0x155)](this[_0x115882(0xf0)],'t',0x0,this[_0x115882(0x153)]),_0x519a42[_0x115882(0x155)](this['interpolator_settings'],_0x115882(0x10e),0.0001,0xa)[_0x115882(0x129)](_0x115882(0x11a)),_0x519a42['add'](this[_0x115882(0x123)],_0x115882(0x113)),_0x519a42[_0x115882(0x155)](this[_0x115882(0x123)],_0x115882(0x14a));}let _0x448001=_0x165946[_0x115882(0x112)]('Links');for(let _0x52d7eb=0x0;_0x52d7eb<_0x1ae663[_0x115882(0x14c)]['length'];_0x52d7eb++){let _0x4ae8df=![];_0x3c5577&&(_0x4ae8df=!![]),this[_0x115882(0xfa)][_0x115882(0x120)+_0x52d7eb[_0x115882(0x15b)]()+_0x115882(0x12c)]=_0x4ae8df,_0x448001[_0x115882(0x155)](this['settings'],_0x115882(0x120)+_0x52d7eb['toString']()+_0x115882(0x12c))[_0x115882(0x129)](_0x115882(0x135)+_0x52d7eb['toString']()+':\x20'+_0x1ae663['links'][_0x52d7eb][_0x115882(0x102)]);}this[_0x115882(0x10b)][_0x115882(0x119)]=()=>{const _0x20454f=_0x115882;for(let _0x409255=0x0;_0x409255<_0x1ae663[_0x20454f(0x14c)][_0x20454f(0x111)];_0x409255++){this[_0x20454f(0xfa)][_0x20454f(0x120)+_0x409255[_0x20454f(0x15b)]()+_0x20454f(0x12c)]=!![];}refresh_displays(_0x165946);},this[_0x115882(0x10b)][_0x115882(0x12e)]=()=>{const _0x4387a3=_0x115882;for(let _0x26ecc7=0x0;_0x26ecc7<_0x1ae663[_0x4387a3(0x14c)][_0x4387a3(0x111)];_0x26ecc7++){this[_0x4387a3(0xfa)][_0x4387a3(0x120)+_0x26ecc7[_0x4387a3(0x15b)]()+_0x4387a3(0x12c)]=![];}refresh_displays(_0x165946);},_0x3d9cc7[_0x115882(0x155)](this[_0x115882(0x10b)],_0x115882(0x119))[_0x115882(0x129)](_0x115882(0xff)),_0x3d9cc7[_0x115882(0x155)](this[_0x115882(0x10b)],'deselect_all')[_0x115882(0x129)]('Deselect\x20All\x20Frames'),this[_0x115882(0x12b)]=_0x165946;}[_0x84b278(0x124)](_0x86d9c6){const _0xdada3f=_0x84b278;this[_0xdada3f(0xf8)]&&(this['interpolator_settings'][_0xdada3f(0x15f)]&&(this['interpolator_settings']['t']+=this[_0xdada3f(0xf0)][_0xdada3f(0x10e)]*0.01,this[_0xdada3f(0xf0)]['t']>this['interpolator_max']&&(this[_0xdada3f(0xf0)]['t']=0x0),refresh_displays(this[_0xdada3f(0x12b)])));let _0x58e86b=[];for(let _0x2521c1=0x0;_0x2521c1<this[_0xdada3f(0x15d)][_0xdada3f(0x14d)]();_0x2521c1++){let _0x3f9693=this['settings'][_0xdada3f(0x108)+_0x2521c1[_0xdada3f(0x15b)]()];_0x58e86b[_0xdada3f(0x104)](_0x3f9693);}!this['interpolator']&&set_robot_state(_0x86d9c6,this['robot'],_0x58e86b);this[_0xdada3f(0x15d)][_0xdada3f(0x127)](_0x86d9c6,this[_0xdada3f(0xfa)]['display_wireframe']),this[_0xdada3f(0x15d)]['set_mesh_visibility'](_0x86d9c6,this[_0xdada3f(0xfa)][_0xdada3f(0x110)]);let _0xffd82d=forward_kinematics_SO3_and_position_all(this[_0xdada3f(0x15d)],_0x58e86b);for(let _0x417713=0x0;_0x417713<this[_0xdada3f(0x15d)]['links'][_0xdada3f(0x111)];_0x417713++){this[_0xdada3f(0xfa)][_0xdada3f(0x12d)]&&this[_0xdada3f(0xfa)][_0xdada3f(0x110)]&&this['robot'][_0xdada3f(0x101)](_0x86d9c6,_0x417713,![]);this['settings'][_0xdada3f(0x12d)]&&this[_0xdada3f(0xfa)][_0xdada3f(0x14e)]&&this['robot']['set_link_wireframe_visibility'](_0x86d9c6,_0x417713,![]);let _0x401d52;if(this[_0xdada3f(0xf8)]){let _0x4fdd6e=this[_0xdada3f(0xf0)]['t'],_0x3c8b1f=this[_0xdada3f(0x15d)][_0xdada3f(0x154)][_0x417713]*0x3;if(_0x4fdd6e>=_0x3c8b1f&&_0x4fdd6e<=_0x3c8b1f+0x3){let _0x379d50=0x3-(_0x3c8b1f+0x3-_0x4fdd6e);if(0x0<=_0x379d50&&_0x379d50<=0x1){let _0x3309f1=[identity_matrix(0x3),[[0x0],[0x0],[0x0]]],_0x4e5ce5=_0xffd82d[0x0][_0x417713];_0x401d52=interpolate_poses_SO3_and_position(_0x3309f1,_0x4e5ce5,_0x379d50);}else{if(0x1<=_0x379d50&&_0x379d50<=0x2){let _0x5628f4=_0x379d50-0x1,_0x4f1ddd=_0xffd82d[0x0][_0x417713],_0x5ba43b=_0xffd82d[0x1][_0x417713];_0x401d52=interpolate_poses_SO3_and_position(_0x4f1ddd,_0x5ba43b,_0x5628f4);}else{if(0x2<=_0x379d50&&_0x379d50<=0x3){let _0x503b29=_0x379d50-0x2,_0x487bc1=_0xffd82d[0x1][_0x417713],_0x5cbb32=_0xffd82d[0x2][_0x417713];_0x401d52=interpolate_poses_SO3_and_position(_0x487bc1,_0x5cbb32,_0x503b29);}}}}else _0x3c8b1f<_0x4fdd6e?_0x401d52=_0xffd82d[0x2][_0x417713]:_0x401d52=[identity_matrix(0x3),[[0x0],[0x0],[0x0]]];}else _0x401d52=_0xffd82d[0x2][_0x417713];this[_0xdada3f(0xf8)]&&this[_0xdada3f(0x15d)][_0xdada3f(0x151)](_0x86d9c6,_0x417713,_0x401d52[0x0],_0x401d52[0x1]);if(this[_0xdada3f(0xfa)][_0xdada3f(0x120)+_0x417713[_0xdada3f(0x15b)]()+'frame']){let _0x4e6d43=_0x401d52[0x0],_0x3a0ab7=_0x401d52[0x1],_0x301b01=[[_0x4e6d43[0x0][0x0]],[_0x4e6d43[0x1][0x0]],[_0x4e6d43[0x2][0x0]]],_0x40dfb0=[[_0x4e6d43[0x0][0x1]],[_0x4e6d43[0x1][0x1]],[_0x4e6d43[0x2][0x1]]],_0x5951ed=[[_0x4e6d43[0x0][0x2]],[_0x4e6d43[0x1][0x2]],[_0x4e6d43[0x2][0x2]]];_0x86d9c6['draw_debug_line'](_0x3a0ab7,add_matrix_matrix(_0x3a0ab7,mul_matrix_scalar(_0x301b01,0.05)),!![],0.002,0xff3333),_0x86d9c6[_0xdada3f(0x144)](_0x3a0ab7,add_matrix_matrix(_0x3a0ab7,mul_matrix_scalar(_0x40dfb0,0.05)),!![],0.002,0x33ff33),_0x86d9c6[_0xdada3f(0x144)](_0x3a0ab7,add_matrix_matrix(_0x3a0ab7,mul_matrix_scalar(_0x5951ed,0.05)),!![],0.002,0x3333ff),this[_0xdada3f(0xfa)][_0xdada3f(0x12d)]&&this[_0xdada3f(0xfa)]['display_mesh']&&this[_0xdada3f(0x15d)]['set_link_mesh_visibility'](_0x86d9c6,_0x417713,!![]),this[_0xdada3f(0xfa)][_0xdada3f(0x12d)]&&this[_0xdada3f(0xfa)][_0xdada3f(0x14e)]&&this[_0xdada3f(0x15d)][_0xdada3f(0x10f)](_0x86d9c6,_0x417713,!![]);}}return _0xffd82d[0x2];}}export class RobotOptVisualizer{constructor(_0x397850,_0x31b715,_0x4d94f5,_0x12e55f,_0x163a08=!![],_0x2a0a6f=![],_0x373547=![],_0x3ddcbb=![],_0x23b7df=!![],_0x185f7f=![],_0x20e5a9=![],_0x5b382c=![],_0x39290f=![],_0x35883a=![],_0x1ff03e='bfgs'){const _0x2242f3=_0x84b278;this['robot']=_0x31b715,this[_0x2242f3(0x132)]=_0x4d94f5,this[_0x2242f3(0x11f)]=_0x4d94f5,this[_0x2242f3(0x13f)]=_0x4d94f5,this['prev_solve']=_0x4d94f5,this[_0x2242f3(0xfb)]=_0x12e55f,this[_0x2242f3(0x103)]=!![],this[_0x2242f3(0xec)]=_0x1ff03e,this[_0x2242f3(0x122)]=![],this[_0x2242f3(0x116)]=![],this[_0x2242f3(0x13e)]=![],this[_0x2242f3(0x10b)]={'solve_now':()=>{this['solve_now']=!![];},'reset':()=>{this['reset']=!![];},'toggle_widget_mode':()=>{const _0x5b7fdc=_0x2242f3;this[_0x5b7fdc(0x13e)]=!![];}},this[_0x2242f3(0xfa)]={'display_wireframe':_0x2a0a6f,'display_mesh':_0x163a08,'display_link_mesh_only_with_frame':_0x373547,'continuous_solves':_0x23b7df};let _0x5349c3=get_default_lil_gui(),_0x184ca5=_0x5349c3[_0x2242f3(0x155)](this[_0x2242f3(0xfa)],_0x2242f3(0x110))[_0x2242f3(0x129)]('Display\x20Mesh');_0x185f7f&&_0x184ca5['disable']();let _0x5e1fd3=_0x5349c3[_0x2242f3(0x155)](this[_0x2242f3(0xfa)],_0x2242f3(0x14e))['name'](_0x2242f3(0x148));_0x20e5a9&&_0x5e1fd3['disable']();let _0x344ff4=_0x5349c3[_0x2242f3(0x155)](this[_0x2242f3(0xfa)],_0x2242f3(0x12d))[_0x2242f3(0x129)](_0x2242f3(0x114));_0x5b382c&&_0x344ff4[_0x2242f3(0x13c)]();let _0x55fa6a=_0x5349c3[_0x2242f3(0x155)](this[_0x2242f3(0xfa)],_0x2242f3(0x107))[_0x2242f3(0x129)]('Continuous\x20solves');_0x39290f&&_0x55fa6a['disable']();let _0x3851d2=_0x5349c3['add'](this[_0x2242f3(0x10b)],_0x2242f3(0x122))[_0x2242f3(0x129)](_0x2242f3(0x150));_0x35883a&&_0x3851d2['disable']();_0x5349c3[_0x2242f3(0x155)](this[_0x2242f3(0x10b)],_0x2242f3(0x116))[_0x2242f3(0x129)](_0x2242f3(0x152)),_0x5349c3[_0x2242f3(0x155)](this[_0x2242f3(0x10b)],_0x2242f3(0x13e))['name']('Toggle\x20transform\x20gizmo\x20mode');let _0x45a9ea=[],_0x265720=_0x5349c3[_0x2242f3(0x112)](_0x2242f3(0x160)),_0x354bb3=0x0;for(let _0x3be0aa=0x0;_0x3be0aa<_0x31b715[_0x2242f3(0x100)][_0x2242f3(0x111)];_0x3be0aa++){let _0x3c92ca=_0x31b715['joints'][_0x3be0aa];if(_0x3c92ca[_0x2242f3(0x117)]>0x0){if(_0x3c92ca[_0x2242f3(0x14f)]===_0x2242f3(0x10c)){for(let _0x13a1b8=0x0;_0x13a1b8<0x3;_0x13a1b8++){this['settings'][_0x2242f3(0x108)+_0x354bb3[_0x2242f3(0x15b)]()]=0x0;let _0x5a1f10=_0x265720['add'](this[_0x2242f3(0xfa)],_0x2242f3(0x108)+_0x354bb3[_0x2242f3(0x15b)](),-3.14,3.14);_0x5a1f10['disable'](),_0x45a9ea[_0x2242f3(0x104)](0x0),_0x354bb3++;}for(let _0x380721=0x0;_0x380721<0x3;_0x380721++){this[_0x2242f3(0xfa)][_0x2242f3(0x108)+_0x354bb3[_0x2242f3(0x15b)]()]=0x0;let _0x3ce277=_0x265720[_0x2242f3(0x155)](this[_0x2242f3(0xfa)],'dof'+_0x354bb3[_0x2242f3(0x15b)](),-0x1,0x1);_0x3ce277['disable'](),_0x45a9ea[_0x2242f3(0x104)](0x0),_0x354bb3++;}}else{let _0x120ece=_0x3c92ca[_0x2242f3(0x105)],_0x5bdac0=_0x3c92ca[_0x2242f3(0x15a)];this[_0x2242f3(0xfa)][_0x2242f3(0x108)+_0x354bb3['toString']()]=Math[_0x2242f3(0x134)](Math[_0x2242f3(0x126)](0x0,_0x5bdac0),_0x120ece),_0x45a9ea['push'](Math[_0x2242f3(0x134)](Math[_0x2242f3(0x126)](0x0,_0x5bdac0),_0x120ece));let _0x2b35a2=_0x265720[_0x2242f3(0x155)](this['settings'],'dof'+_0x354bb3['toString'](),_0x120ece,_0x5bdac0);_0x2b35a2['disable'](),_0x354bb3+=0x1;}}}let _0x1bcb95=_0x5349c3['addFolder'](_0x2242f3(0x139)),_0x117a76=_0x5349c3[_0x2242f3(0x112)](_0x2242f3(0x157));for(let _0x456abc=0x0;_0x456abc<_0x31b715[_0x2242f3(0x14c)][_0x2242f3(0x111)];_0x456abc++){let _0x3cc049=![];_0x3ddcbb&&(_0x3cc049=!![]),this[_0x2242f3(0xfa)]['link'+_0x456abc['toString']()+'frame']=_0x3cc049,_0x117a76[_0x2242f3(0x155)](this[_0x2242f3(0xfa)],_0x2242f3(0x120)+_0x456abc[_0x2242f3(0x15b)]()+_0x2242f3(0x12c))[_0x2242f3(0x129)](_0x2242f3(0x135)+_0x456abc[_0x2242f3(0x15b)]()+':\x20'+_0x31b715['links'][_0x456abc]['link_name']);}this[_0x2242f3(0x10b)][_0x2242f3(0x119)]=()=>{const _0x23c0f9=_0x2242f3;for(let _0x2d365b=0x0;_0x2d365b<_0x31b715['links'][_0x23c0f9(0x111)];_0x2d365b++){this[_0x23c0f9(0xfa)][_0x23c0f9(0x120)+_0x2d365b[_0x23c0f9(0x15b)]()+_0x23c0f9(0x12c)]=!![];}refresh_displays(_0x5349c3);},this[_0x2242f3(0x10b)]['deselect_all']=()=>{const _0x268376=_0x2242f3;for(let _0x12280f=0x0;_0x12280f<_0x31b715['links'][_0x268376(0x111)];_0x12280f++){this[_0x268376(0xfa)]['link'+_0x12280f[_0x268376(0x15b)]()+_0x268376(0x12c)]=![];}refresh_displays(_0x5349c3);},_0x1bcb95[_0x2242f3(0x155)](this[_0x2242f3(0x10b)],_0x2242f3(0x119))[_0x2242f3(0x129)](_0x2242f3(0xff)),_0x1bcb95[_0x2242f3(0x155)](this[_0x2242f3(0x10b)],_0x2242f3(0x12e))[_0x2242f3(0x129)](_0x2242f3(0x146));let _0xd009a7=new TransformGizmoEngine(_0x397850),_0x465823=forward_kinematics_SO3_and_position(_0x31b715,_0x4d94f5);_0x12e55f[_0x2242f3(0x140)](_0x405ef8=>{const _0x283a5b=_0x2242f3;let _0x1490f0=_0x405ef8[_0x283a5b(0xeb)];if(_0x1490f0==='pose_match'||_0x1490f0===_0x283a5b(0x136))_0xd009a7['add_gizmo_SO3_matrix_and_position'](_0x397850,_0x465823[_0x405ef8['link_idx']][0x0],_0x465823[_0x405ef8[_0x283a5b(0x133)]][0x1]);else{if(_0x1490f0==='position_match')_0xd009a7['add_gizmo_SO3_matrix_and_position'](_0x397850,_0x465823[_0x405ef8[_0x283a5b(0x133)]][0x0],_0x465823[_0x405ef8[_0x283a5b(0x133)]][0x1]);else{if(_0x1490f0===_0x283a5b(0x156)){let _0x50a835=_0x405ef8[_0x283a5b(0x125)],_0x2afd0a=_0x465823[_0x405ef8['link_idx']],_0xfcb893=mul_matrix_scalar(mul_matrix_matrix(_0x2afd0a[0x0],_0x50a835),0.3);_0xd009a7[_0x283a5b(0x130)](_0x397850,identity_matrix(0x3),add_matrix_matrix(_0x2afd0a[0x1],_0xfcb893));}else{if(_0x1490f0===_0x283a5b(0xfe)){}}}}}),this[_0x2242f3(0x158)]=_0x397850[_0x2242f3(0x118)](),this[_0x2242f3(0x162)]=_0xd009a7,this[_0x2242f3(0x12b)]=_0x5349c3;}[_0x84b278(0x124)](_0x57fd4e,_0x3caf1a=0x64){const _0x433e07=_0x84b278;if(this[_0x433e07(0x116)]){let _0x20d7ab=forward_kinematics_SO3_and_position(this[_0x433e07(0x15d)],this[_0x433e07(0x132)]);for(let _0x50b528=0x0;_0x50b528<this[_0x433e07(0x15d)][_0x433e07(0x14d)]();_0x50b528++){this[_0x433e07(0xfa)]['dof'+_0x50b528['toString']()]=this['init_state'][_0x50b528];}refresh_displays(this['gui']);let _0x19d7cc=0x0;this[_0x433e07(0xfb)]['forEach'](_0x234f1c=>{const _0x51cb15=_0x433e07;let _0x435180=_0x234f1c[_0x51cb15(0xeb)];if(_0x435180===_0x51cb15(0x13a)||_0x435180===_0x51cb15(0x136))this[_0x51cb15(0x162)][_0x51cb15(0x11b)](_0x19d7cc,_0x20d7ab[_0x234f1c[_0x51cb15(0x133)]][0x0],_0x20d7ab[_0x234f1c[_0x51cb15(0x133)]][0x1]),_0x19d7cc+=0x1;else{if(_0x435180==='position_match')this['transform_gizmo_engine']['set_pose_of_gizmo_SO3_matrix_and_position'](_0x19d7cc,_0x20d7ab[_0x234f1c[_0x51cb15(0x133)]][0x0],_0x20d7ab[_0x234f1c[_0x51cb15(0x133)]][0x1]),_0x19d7cc+=0x1;else{if(_0x435180==='look_at'){let _0x836f52=_0x234f1c[_0x51cb15(0x125)],_0x23776e=_0x20d7ab[_0x234f1c[_0x51cb15(0x133)]],_0x211c44=mul_matrix_scalar(mul_matrix_matrix(_0x23776e[0x0],_0x836f52),0.3);this[_0x51cb15(0x162)][_0x51cb15(0x11b)](_0x19d7cc,identity_matrix(0x3),add_matrix_matrix(_0x23776e[0x1],_0x211c44)),_0x19d7cc+=0x1;}else{if(_0x435180===_0x51cb15(0xfe)){}}}}}),this[_0x433e07(0x11f)]=this[_0x433e07(0x132)],this[_0x433e07(0x116)]=![];}let _0x342a56=this[_0x433e07(0x122)]||this[_0x433e07(0xfa)][_0x433e07(0x107)];if(_0x342a56){let _0x5cfd7d=[],_0x44856d=0x0;this[_0x433e07(0xfb)][_0x433e07(0x140)](_0x2ebe16=>{const _0x22a5cf=_0x433e07;let _0x34809d=_0x2ebe16[_0x22a5cf(0xeb)];if(_0x34809d==='pose_match'){let _0x129365=this[_0x22a5cf(0x162)]['get_gizmo_pose_as_SO3_matrix_and_position'](_0x44856d);_0x44856d+=0x1,_0x5cfd7d['push'](new OptGoalPoseMatch(_0x129365,_0x2ebe16['link_idx'],_0x2ebe16[_0x22a5cf(0xf6)]));}else{if(_0x34809d===_0x22a5cf(0x136)){let _0x35faf7=this[_0x22a5cf(0x162)][_0x22a5cf(0x143)](_0x44856d);_0x44856d+=0x1,_0x5cfd7d[_0x22a5cf(0x104)](new OptGoalPoseMatchWrong(_0x35faf7,_0x2ebe16[_0x22a5cf(0x133)],_0x2ebe16[_0x22a5cf(0xf6)]));}else{if(_0x34809d===_0x22a5cf(0x13d)){let _0x1378ad=this['transform_gizmo_engine'][_0x22a5cf(0x143)](_0x44856d);_0x44856d+=0x1,_0x5cfd7d[_0x22a5cf(0x104)](new OptGoalPositionMatch(_0x1378ad[0x1],_0x2ebe16['link_idx'],_0x2ebe16['weight']));}else{if(_0x34809d===_0x22a5cf(0x156)){let _0x1c1240=this[_0x22a5cf(0x162)][_0x22a5cf(0x143)](_0x44856d);_0x44856d+=0x1,_0x5cfd7d[_0x22a5cf(0x104)](new OptGoalLookAt(_0x1c1240[0x1],_0x2ebe16[_0x22a5cf(0x133)],_0x2ebe16['forward_axis'],_0x2ebe16[_0x22a5cf(0xf6)]));}else _0x34809d===_0x22a5cf(0xfe)&&_0x5cfd7d[_0x22a5cf(0x104)](new OptGoalUpright(_0x2ebe16[_0x22a5cf(0x133)],_0x2ebe16[_0x22a5cf(0x12a)],_0x2ebe16[_0x22a5cf(0xf6)]));}}}});let _0xdde0fe=_0x3caf1a;!this['settings'][_0x433e07(0x107)]&&(_0xdde0fe=0x1f4);let _0x4792bb=robot_kinematic_opt(this[_0x433e07(0x15d)],this[_0x433e07(0x11f)],_0x5cfd7d,_0xdde0fe,this[_0x433e07(0xec)]);this['curr_state']=_0x4792bb,this[_0x433e07(0x122)]=![],this[_0x433e07(0x103)]=![];}this[_0x433e07(0x13e)]&&(this['transform_gizmo_engine'][_0x433e07(0x10a)](),this[_0x433e07(0x13e)]=![]);this[_0x433e07(0x15d)][_0x433e07(0x127)](_0x57fd4e,this[_0x433e07(0xfa)][_0x433e07(0x14e)]),this['robot'][_0x433e07(0xee)](_0x57fd4e,this[_0x433e07(0xfa)]['display_mesh']);let _0x3a9d6a=forward_kinematics_SO3_and_position(this['robot'],this[_0x433e07(0x11f)]);set_robot_state_from_SO3_and_position_fk_result(_0x57fd4e,this[_0x433e07(0x15d)],_0x3a9d6a);for(let _0x27b919=0x0;_0x27b919<this[_0x433e07(0x15d)][_0x433e07(0x14d)]();_0x27b919++){this[_0x433e07(0xfa)][_0x433e07(0x108)+_0x27b919[_0x433e07(0x15b)]()]=this[_0x433e07(0x11f)][_0x27b919][_0x433e07(0x128)](0x3);}refresh_displays(this[_0x433e07(0x12b)]);for(let _0x5e2b23=0x0;_0x5e2b23<this[_0x433e07(0x15d)]['links'][_0x433e07(0x111)];_0x5e2b23++){this[_0x433e07(0xfa)]['display_link_mesh_only_with_frame']&&this[_0x433e07(0xfa)]['display_mesh']&&this[_0x433e07(0x15d)][_0x433e07(0x101)](_0x57fd4e,_0x5e2b23,![]);this[_0x433e07(0xfa)][_0x433e07(0x12d)]&&this[_0x433e07(0xfa)]['display_wireframe']&&this[_0x433e07(0x15d)]['set_link_wireframe_visibility'](_0x57fd4e,_0x5e2b23,![]);let _0x197c16=_0x3a9d6a[_0x5e2b23];if(this[_0x433e07(0xfa)][_0x433e07(0x120)+_0x5e2b23['toString']()+_0x433e07(0x12c)]){let _0xe123e5=_0x197c16[0x0],_0x23d573=_0x197c16[0x1],_0x16f2e0=[[_0xe123e5[0x0][0x0]],[_0xe123e5[0x1][0x0]],[_0xe123e5[0x2][0x0]]],_0x193ce8=[[_0xe123e5[0x0][0x1]],[_0xe123e5[0x1][0x1]],[_0xe123e5[0x2][0x1]]],_0x41373c=[[_0xe123e5[0x0][0x2]],[_0xe123e5[0x1][0x2]],[_0xe123e5[0x2][0x2]]];_0x57fd4e[_0x433e07(0x144)](_0x23d573,add_matrix_matrix(_0x23d573,mul_matrix_scalar(_0x16f2e0,0.05)),!![],0.002,0xff3333),_0x57fd4e[_0x433e07(0x144)](_0x23d573,add_matrix_matrix(_0x23d573,mul_matrix_scalar(_0x193ce8,0.05)),!![],0.002,0x33ff33),_0x57fd4e['draw_debug_line'](_0x23d573,add_matrix_matrix(_0x23d573,mul_matrix_scalar(_0x41373c,0.05)),!![],0.002,0x3333ff),this['settings']['display_link_mesh_only_with_frame']&&this[_0x433e07(0xfa)][_0x433e07(0x110)]&&this[_0x433e07(0x15d)][_0x433e07(0x101)](_0x57fd4e,_0x5e2b23,!![]),this[_0x433e07(0xfa)][_0x433e07(0x12d)]&&this[_0x433e07(0xfa)]['display_wireframe']&&this[_0x433e07(0x15d)][_0x433e07(0x10f)](_0x57fd4e,_0x5e2b23,!![]);}}this[_0x433e07(0xfb)][_0x433e07(0x140)](_0x1dcc4b=>{const _0x500783=_0x433e07;let _0x106d8e=_0x1dcc4b[_0x500783(0xeb)];if(_0x106d8e===_0x500783(0x156)){let _0x1e1b29=_0x1dcc4b[_0x500783(0x125)],_0x3c7c04=mul_matrix_matrix(_0x3a9d6a[_0x1dcc4b[_0x500783(0x133)]][0x0],_0x1e1b29),_0x229b8f=_0x3a9d6a[_0x1dcc4b[_0x500783(0x133)]][0x1];_0x57fd4e[_0x500783(0x144)](_0x229b8f,add_matrix_matrix(mul_matrix_scalar(_0x3c7c04,0x3),_0x229b8f),!![],0.0015,0xffee00);}});}}